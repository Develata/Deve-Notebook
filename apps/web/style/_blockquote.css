/**
 * _blockquote.css - 引用块样式
 * 
 * 实现 1-10 层嵌套引用的递进式缩进与边框渲染。
 * 核心策略：Padding 缩进 + CSS Gradient 模拟垂直边框线。
 */

/* ==================== 深度变量定义 ==================== */
/* 每层深度设置 --depth 和 --border-color 变量 */
.cm-line.cm-blockquote-depth-1  { --depth: 1;  --border-color: var(--bq-border-1); }
.cm-line.cm-blockquote-depth-2  { --depth: 2;  --border-color: var(--bq-border-2); }
.cm-line.cm-blockquote-depth-3  { --depth: 3;  --border-color: var(--bq-border-3); }
.cm-line.cm-blockquote-depth-4  { --depth: 4;  --border-color: var(--bq-border-4); }
.cm-line.cm-blockquote-depth-5  { --depth: 5;  --border-color: var(--bq-border-5); }
.cm-line.cm-blockquote-depth-6  { --depth: 6;  --border-color: var(--bq-border-6); }
.cm-line.cm-blockquote-depth-7  { --depth: 7;  --border-color: var(--bq-border-7); }
.cm-line.cm-blockquote-depth-8  { --depth: 8;  --border-color: var(--bq-border-8); }
.cm-line.cm-blockquote-depth-9  { --depth: 9;  --border-color: var(--bq-border-9); }
.cm-line.cm-blockquote-depth-10 { --depth: 10; --border-color: var(--bq-border-10); }

/* ==================== 引用块通用样式 ==================== */
/* 使用属性选择器匹配所有深度类 */
.cm-line[class*="cm-blockquote-depth-"] {
  margin-left: 0 !important;
  border-left: none !important;
  background-color: var(--bq-bg-color) !important;
  padding-left: calc(var(--bq-indent-step) * var(--depth)) !important;
  
  /* 使用 gradient 在正确位置绘制边框线 */
  background-image: linear-gradient(
    to right,
    transparent calc(var(--bq-indent-step) * (var(--depth) - 1)),
    var(--border-color) calc(var(--bq-indent-step) * (var(--depth) - 1)),
    var(--border-color) calc(var(--bq-indent-step) * (var(--depth) - 1) + var(--bq-border-width)),
    transparent calc(var(--bq-indent-step) * (var(--depth) - 1) + var(--bq-border-width))
  ) !important;
}

/* ==================== Depth 1 特殊处理 ==================== */
/* 第一层边框从位置 0 开始，需要单独处理 */
.cm-line.cm-blockquote-depth-1 {
  background-image: linear-gradient(
    to right,
    var(--bq-border-1) var(--bq-border-width),
    transparent var(--bq-border-width)
  ) !important;
}

/* ==================== 引用文本样式 ==================== */
.cm-blockquote {
  color: #475569;
  font-style: italic;
}

/* 旧版引用样式 (兼容) */
.cm-quote {
  color: var(--editor-muted);
}
