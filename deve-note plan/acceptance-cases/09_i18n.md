## 国际化

```markdown
- case_id: I18N-001
  goal: UI 文本无硬编码。
  preconditions:
    - 前端源码可访问
  steps:
    - run: rg -n "[^\"]+[\u4e00-\u9fa5]" "apps/web/src"  # 检索可见中文硬编码
  assertions:
    - stdout_not_contains: ""  # 不应发现硬编码文本

- case_id: I18N-002
  goal: Locale 检测优先级。
  preconditions:
    - ui.locale=auto
  steps:
    - browser_set_language: "ja-JP"
    - browser_reload: true
  assertions:
    - ui_assert: locale_eq "ja-JP"

- case_id: I18N-003
  goal: 缺失 Key 回退到 en-US。
  preconditions:
    - 某语言缺少 key
  steps:
    - ui_switch_locale: "xx-XX"
  assertions:
    - ui_assert: locale_fallback_eq "en-US"

- case_id: I18N-004
  goal: 后端返回错误码。
  preconditions:
    - 触发认证错误
  steps:
    - run: curl -s http://127.0.0.1:3000/api/login -d "u=bad&p=bad"
  assertions:
    - stdout_matches: "[A-Z_]+"
    - stdout_not_contains: "密码"

- case_id: I18N-005
  goal: 日期/时间/数字本地化。
  preconditions:
    - 页面展示日期或数值
  steps:
    - ui_switch_locale: "en-US"
    - ui_capture_text: "date_field"
    - ui_switch_locale: "zh-CN"
    - ui_capture_text: "date_field"
  assertions:
    - ui_assert: locale_format_changed true
```
