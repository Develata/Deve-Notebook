# 10_i18n.md - 语言篇 (Internationalization)

## 国际化策略 (Internationalization Strategy)

*   **技术选型**：使用 **leptos_i18n**。
    *   **优势**：提供编译时校验 (Compile-time checking)，防止 Key 缺失或类型错误。
*   **UI 文本管理**：
    *   核心 UI 文本 **MUST** 全部使用 `leptos_i18n` 进行管理，严禁硬编码字符串。
*   **Format Handling (格式处理)**:
    *   **Date/Time/Number**: 严禁手动拼装 (e.g., `YYYY-MM-DD`)。**MUST** 使用 `Intl` API (JavaScript) 或 Rust 的 `time` crate 进行本地化格式输出。
*   **Backend Error Handling (后端错误处理)**:
    *   后端 API **MUST NOT** 返回自然语言错误信息 (e.g., "密码错误")。
    *   **MUST** 返回标准错误码 (e.g., `AUTH_INVALID_PASSWORD`)。
    *   前端根据 Error Code 查找 `i18n` 映射表进行展示。

## 语言资源管理 (Resource Management)

*   **Structure**: 采用 Flat JSON 或 TOML 格式存储。
*   **Fallback**: 若当前 Locale 缺失某 Key，**MUST** 自动回退到 `en-US`。
*   **Detection**: 启动时优先级:
    1.  User Config (`locale` setting).
    2.  Browser Preference (`navigator.language`).
    3.  Default (`en-US`).


## 本章相关命令

*   `Global: Toggle Language`: 按顺序在支持的语言列表 (e.g., en -> zh -> ja -> en) 中循环切换界面语言。

## 本章相关配置

*   `locale`: 界面语言设置 (e.g., `en-US`, `zh-CN`).
